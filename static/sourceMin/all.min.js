!function(angular){"use strict";var CRMApp=angular.module("mainCRMApp",["ngRoute","ui.router","mainCRMApp.dahsboardView","mainCRMApp.loginView"]);CRMApp.controller("mainCRMCtrl",function($rootScope){$rootScope.userID="",$rootScope.userEmail="",$rootScope.accessToken="",$rootScope.appID="",$rootScope.appSecret=""})}(angular);var CRMApp=angular.module("mainCRMApp.loginView",[]);CRMApp.controller("loginViewCtrl",["$scope","$rootScope","$http",function($scope,$rootScope,$http){function getUserData(email){$http({method:"POST",url:"userdata/",data:"emailID="+email,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(response){console.log(response),"success"==response.data.status&&(console.log("User data: ",response),$rootScope.userID=response.data.data.userid,sessionStorage.setItem("userID",response.data.data.userid),$rootScope.userEmail=response.data.data.email,sessionStorage.setItem("email",response.data.data.email),$rootScope.accessToken=response.data.data.accessToken,sessionStorage.setItem("accessToken",response.data.data.accessToken),$rootScope.appID=response.data.data.appID,sessionStorage.setItem("appID",response.data.data.appID),$rootScope.appSecret=response.data.data.appSecret,sessionStorage.setItem("appSecret",response.data.data.appSecret),document.location.href="/dashboard")},function(response){"error"==response.data.status&&alert("Error")})}$rootScope.shredData1="Shared success",$scope.signInPanelColor="#2EFEF7",$scope.loginObject={userName:"barathbaisetty@inviter.com",password:"jaisriram"},$scope.loginError=!1,$scope.loginErrorMessage="",$scope.crmLoginRequest=function(loginObj){$scope.loginError=!1,console.log(loginObj),$http({method:"POST",url:"login/",data:"emailID="+loginObj.userName+"&password="+encodeURIComponent(loginObj.password),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(response){"success"==response.data.status&&getUserData($scope.loginObject.userName)},function(response){$scope.loginError=!0,$scope.loginErrorMessage=response.data.message})},$scope.objectToRequestData=function(dataObj){var form_data="";for(var key in dataObj)form_data=form_data+key+"="+dataObj[key]+"&";return form_data.slice(0,-1)}}]),CRMApp.config(function($httpProvider){$httpProvider.defaults.xsrfCookieName="csrftoken",$httpProvider.defaults.xsrfHeaderName="X-CSRFToken"}),function(angular){"use strict";var CRMApp=angular.module("mainCRMApp.dahsboardView",[]);void 0!=CRMApp.register&&(CRMApp=CRMApp.register),CRMApp.controller("dashboardViewCtrl",["$scope","$rootScope","$http",function($scope,$rootScope,$http){$scope.allEvents="",null==sessionStorage.getItem("email"),$http({method:"POST",url:"/getevents/",headers:{accessToken:sessionStorage.getItem("accessToken"),appID:sessionStorage.getItem("appID"),appSecret:sessionStorage.getItem("appSecret")}}).then(function(response){console.log(response),"success"==response.data.status&&(console.log("All events: ",response),$scope.allEvents=response.data.data)},function(response){"error"==response.data.status}),$scope.logout=function(){$http({method:"POST",url:"/logout/",headers:{accessToken:sessionStorage.getItem("accessToken"),appID:sessionStorage.getItem("appID"),appSecret:sessionStorage.getItem("appSecret")}}).then(function(response){console.log("Response: ",response),"success"==response.data.status&&(document.location.href="/")},function(response){})},$scope.eventStatusToText=function(flag){return"DR"==flag?($scope.labelClassStatus="label label-default","Draft"):"SS"==flag?($scope.labelClassStatus="label label-success","Sent"):"SB"==flag?($scope.labelClassStatus="label label-warning","Submitted"):"SH"==flag?($scope.labelClassStatus="label label-primary","Scheduled"):"CC"==flag?($scope.labelClassStatus="label label-danger","Canceled"):"XX"==flag?($scope.labelClassStatus="label label-danger","Deleted"):"ST"==flag?($scope.labelClassStatus="label label-warning","Staging"):"PB"==flag?($scope.labelClassStatus="label label-info","Public"):""==flag?($scope.labelClassStatus="label label-default",""):"DR"!=flag||"SS"!=flag||"SB"!=flag||"SH"!=flag||"CC"!=flag||"XX"!=flag||"ST"!=flag||"PB"!=flag||""!=flag?(console.log("Some error data receive into eventStatusToText method."),"unknown data received"):void 0}}])}(angular);